<!DOCTYPE html>

{% load static %}

<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>Number Sense: Quiz</title>
</head>

<body>
    <h1>Number Sense Quiz</h1>
    <p>
        Use the two cards to answer the following questions. <br>
        <img src="{% static 'images/Inkay.png' %}" alt="Inkay">
        <img src="{% static 'images/Wattrel.png' %}" alt="Wattrel">
    </p>
    <form id="quiz-form">
        <div id="quiz-container"></div>
        <button type="submit" id="submit-button">Submit</button>
    </form>
    <div id="result-container"></div>

    <footer>
        <a href="{% url 'learning:dashboard' %}">Student Dashboard</a> <br>
        <a href="{% url 'learning:students_home' %}">Student Home</a> <br>
        <a href="{% url 'learning:learning_home' %}">Learning Home</a> <br>
        <a href="{% url 'index' %}">Home</a>
    </footer>

    <script>
        document.addEventListener('DOMContentLoaded', function () {

            // array of quiz questions and answers
            const questions = [
                {
                    question: "Fill in the blank with the correct symbol (<, >, or =). Inkay's weight ____ Wattrel's weight.",
                    answer: '<'
                },
                {
                    question: "Fill in the blank with the correct symbol (<, >, or =). Inkay's set number ____ Wattrel's set number.",
                    answer: '>'
                },
                {
                    question: "Fill in the blank with the correct symbol (<, >, or =). Inkay's HP ____ Wattrel's HP.",
                    answer: '='
                },
                {
                    question: "True or false: Hug's damage output < Peck's damage output",
                    answer: 'false'
                },
                {
                    question: "True or false: Inkay's retreat cost = Wattrel's retreat cost.",
                    answer: 'true'
                }
            ];

            const quizContainer = document.getElementById('quiz-container');
            const resultContainer = document.getElementById('result-container');
            const submitButton = document.getElementById('submit-button');

            // function to generate the quiz based on the 'questions' array
            function generateQuiz() {
                const output = [];
                questions.forEach((currentQuestion, questionIndex) => {
                    output.push(
                        `<div class="question">${currentQuestion.question}</div>
                        <div class="options">
                            <input type="text" name="question${questionIndex}" id="question${questionIndex}">
                        </div>`
                    );
                });
                quizContainer.innerHTML = output.join('');
            }

            // function to calculate and display the quiz results
            function showResults(event) {
                event.preventDefault();
                let score = 0;
                questions.forEach((currentQuestion, questionIndex) => {
                    const userAnswer = document.getElementById(`question${questionIndex}`).value.trim().toLowerCase();
                    const correctAnswer = currentQuestion.answer.toLowerCase();
                    if (userAnswer === correctAnswer) {
                        score++;
                    }
                });
                resultContainer.innerHTML = `You scored ${score} out of ${questions.length}.`;
                disableQuiz();
            }

            // function to disable the quiz inputs after submission 
            function disableQuiz() {
                const inputs = document.querySelectorAll('#quiz-form input');
                inputs.forEach(input => input.disabled = true);
                submitButton.disabled = true;
            }

            generateQuiz();
            submitButton.addEventListener('click', showResults);
        });
    </script>
</body>

</html>