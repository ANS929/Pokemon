{% extends 'learning/base.html' %}
{% load static %}

{% block title_block %}
Comparing Decimals
{% endblock %}
{% block body_block %}
<style>
    .details {
        font-size: 28px;
        flex: 1;
        border: 5px solid #316cbc;
        padding: 25px;
        margin: 20px;
        height: auto;
    }

    .content {
        flex: 2;
        display: flex;
        flex-direction: column;
        border: 5px solid #ffcb13;
        padding: 25px;
        margin: 20px;
    }

    .lesson-container {
        display: flex;
        font-size: 20px;
        align-items: flex-start;
    }

    .details h1 {
        text-align: center;
    }

    .imgcontainer {
        max-width: 100%;
        padding: 10px;
        margin-left: 0;
    }

    .imgcontainer .image-container {
        display: flex;
        gap: 15px;
        justify-content: flex-start;
        align-items: flex-start;
    }

    .imgcontainer .image-container .image {
        height: 345px;
        width: 247.5px;
        border: 10px solid #fff;
        box-shadow: 0 5px 15px rgba(0, 0, 0, .1);
        overflow: hidden;
        cursor: pointer;
    }

    .imgcontainer .image-container .image img {
        height: 100%;
        width: 100%;
        object-fit: cover;
        transition: .2s linear;
    }

    .imgcontainer .image-container .image:hover {
        transform: scale(1.1)
    }

    .imgcontainer .popup-image {
        position: fixed;
        top: 0;
        left: 0;
        background: rgba(0, 0, 0, .9);
        height: 100%;
        width: 100%;
        z-index: 100;
        display: none;
    }

    .imgcontainer .popup-image span {
        position: absolute;
        top: 0;
        right: 10px;
        font-size: 10px;
        font-weight: bolder;
        color: #fff;
        cursor: pointer;
        z-index: 100;
    }

    .imgcontainer .popup-image img {
        position: absolute;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        border: 5px solid #fff;
        border-radius: 5px;
        width: 750px;
        object-fit: cover;
    }

    @media (max-width:768px) {
        .imgcontainer .popup-image img {
            width: 95%;
        }
    }
</style>
<header>
    <h1>Comparing Decimals</h1>
</header>

<div class="lesson-container">
    <div class="content">
        <main>
            <section>
                <h2>Introduction:</h2>
                <p>Two decimals can be compared using <b>&gt;</b> (greater than), <b>&lt;</b> (less than), and
                    <b>=</b> (equals) symbols.
                </p>
            </section>

            <section>
                <h2>Greater Than:</h2>
                <p>The greater than symbol (<b>&gt;</b>) is used to show that the number to the left has a higher value
                    than the number on the right. If the whole number part (the number to the left of the decimal) of
                    one number is equal to the whole number part of the other number, then we must look at the
                    fractional part (the number(s) to the right of the decimal) of each and compare them. We start by
                    looking at the tenths place, which is the first number after the decimal.
                </p>

                <p> <u>Example 1</u>: Let's compare 1.3 and 1.2. Since both decimals have a whole part of 1, we must
                    compare the fractional part of each. The first number has a 3 in the tenths position, while the
                    second number has a 2 in the tenths position. Since 3 > 2, we say that 1.3 > 1.2.
                </p>

                <p>
                    Sometimes we must look at the hundredths place, which is the second number after the decimal.
                </p>

                <p><u>Example 2</u>: Let's compare 1.36 and 1.31. Since both decimals have a whole part of 1, we must
                    compare the fractional part of each. We start by looking at the tenths position, which is also the
                    same for both numbers. Now we must look at the hundredths position and compare those numbers. The
                    hundredths position of the first decimal contains 6, while the hundredths position of the second
                    decimal contains 1. Since 6 > 1, we say that 1.36 > 1.31.
                </p>
            </section>

            <section>
                <h2>Less Than:</h2>
                <p> The less than symbol (<b>&lt;</b>) is used to show that the number to the left has a lesser value
                    than the
                    number on the right. We follow a similar process as we did above. </p>

                <p> <u>Example 1</u>: Let's compare 2.2 and 2.9. Since both decimals have a whole part of 2, we
                    must compare the fractional part of each. The first number has a 2 in the tenths position,
                    while the second number has a 9 in the tenths position. Since 2 < 9, we say that 2.2 < 2.9. </p>

                        <p> <u>Example 2</u>: Let's compare 3.14 and 3.15. Since both decimals have a whole part
                            of 3, we must compare the fractional part of each. The numbers in the tenths
                            position are also the same for both numbers. Now we must look at the hundredths
                            position and compare those numbers. The hundredths position of the first decimal
                            contains 4, while the hundredths position of the second decimal contains 5. Since 4
                            < 5, we say that 3.14 < 3.15. </p>
            </section>

            <section>
                <h2>Equals:</h2>
                <p>
                    The equals symbol (<b>=</b>) is used to show that two numbers are equal in value.
                    When the whole part and fractional part of two decimals are the same, then the decimals are equal.
                </p>
                <p><u>Example</u>: 2.72 = 2.72 because both the whole part (2) and the fractional part (0.72) are the
                    same.</p>
            </section>

            <section>
                <h2>You Try:</h2>
                <p>
                    Look at the weights of Fletchling and Rowlet. Compare the two values using <b>&gt;</b>, <b>=</b>, or
                    <b>&lt;</b>. <b>Click on a card to view it in a larger size</b>.
                </p>
                <p>
                    <u>Check your answer using the "Check Answer" button. Once you have the correct answer, submit the
                        practice using the "Submit Practice" button.</u>
                </p>

                <div class="imgcontainer">
                    <div class="image-container">
                        <div class="image"><img src="{% static 'images/Fletchling.png' %}" alt=""></div>
                        <div class="image"><img src="{% static 'images/Rowlet.png' %}" alt=""></div>
                    </div>

                    <div class="popup-image">
                        <span>&times;</span>
                        <img src="" alt="" />
                    </div>
                </div>
                <br>
                <!-- practice submission and feedback -->
                <form id="practice-form" onsubmit="checkAnswer(event)"
                    action="{% url 'learning:submit_practice' practice.slug %}" method="post">
                    {% csrf_token %}
                    <label for="comparisonSymbol"><b>Fletching's weight</b></label>
                    <input type="text" id="comparisonSymbol" name="comparisonSymbol" style="width: 40px;" required>
                    <b>Rowlet's weight</b>
                    <input type="submit" value="Check Answer" id="submitBtn">
                </form>
                <p id="feedback"></p>
                <form id="final-form" method="post" action="{% url 'learning:submit_practice' practice.slug %}"
                    style="display: none;">
                    {% csrf_token %}
                    <input type="hidden" name="correct" value="True">
                    <button type="submit">Submit Practice</button>
                </form>
            </section>
        </main>
    </div>
    <div class="details">
        <h1>Number Sense Content</h1>
        <ul>
            <li><a href="{% url 'learning:practice_detail' practice_slug='comparing-whole-numbers' %}">Comparing
                    Whole
                    Numbers</a></li>
            <li><a href="{% url 'learning:practice_detail' practice_slug='comparing-decimals' %}">Comparing
                    Decimals</a>
            </li>
            <li><a href="{% url 'learning:quiz_detail' quiz_slug='number-sense-quiz' %}">Number Sense Quiz</a></li>
        </ul>
    </div>

    <script>
        // function to check the answer of the practice problem
        function checkAnswer(event) {
            event.preventDefault(); // prevent default form submission

            var comparisonSymbol = document.getElementById('comparisonSymbol').value.trim();
            var correctAnswer = '>';
            var feedback = document.getElementById('feedback');
            var inputField = document.getElementById('comparisonSymbol');
            var submitButton = document.getElementById('submitBtn');
            var finalForm = document.getElementById('final-form'); // form to submit once the answer is correct

            var allowedSymbols = ['>', '=', '<'];

            // validate input
            if (allowedSymbols.indexOf(comparisonSymbol) === -1) {
                feedback.textContent = 'Invalid input. Please enter >, =, or <.';
                return;
            }

            // check for correct answer and provide feedback
            if (comparisonSymbol === correctAnswer) {
                feedback.textContent = 'Correct! 3.7 > 3.3 (since 7 > 3), so ">" is the correct symbol. Well done!';
                inputField.disabled = true; // disable input field
                submitButton.disabled = true; // disable submit button
                finalForm.style.display = 'block'; // show the final submission form
            } else {
                feedback.textContent = 'Incorrect. Please try again.';
            }
        }

        // Function to handle popup image display
        document.querySelectorAll(".image img").forEach(image => {
            image.onclick = () => {
                document.querySelector(".popup-image").style.display = "block";
                document.querySelector(".popup-image img").src = image.getAttribute("src");
            };
        });

        // Close the popup when clicking outside the image
        document.querySelector(".popup-image").onclick = (event) => {
            if (event.target.classList.contains('popup-image')) {
                document.querySelector(".popup-image").style.display = "none";
            }
        };
    </script>
</div><br>
{% endblock %}