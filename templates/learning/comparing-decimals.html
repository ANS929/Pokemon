{% extends 'learning/base.html' %}
{% load static %}

{% block title_block %}
Comparing Decimals
{% endblock %}
{% block body_block %}

<link rel="stylesheet" href="{% static 'css/lesson.css' %}">
<link rel="stylesheet" href="{% static 'css/popupimage.css' %}">

<header>
    <h1>Comparing Decimals</h1>
</header>

<div class="lesson-container">
    <div class="content">
        <main>
            <section>
                <h2>Introduction:</h2>
                <p>Two decimals can be compared using <b>&gt;</b> (greater than), <b>&lt;</b> (less than), and
                    <b>=</b> (equals) symbols.
                </p>
            </section>

            <section>
                <h2>Greater Than:</h2>
                <p>The greater than symbol (<b>&gt;</b>) is used to show that the number to the left has a higher value
                    than the number on the right. If the whole number part (the number to the left of the decimal) of
                    one number is equal to the whole number part of the other number, then we must look at the
                    fractional part (the number(s) to the right of the decimal) of each and compare them. We start by
                    looking at the tenths place, which is the first number after the decimal.
                </p>

                <p> <u>Example 1</u>: Pidove weighs 4.6 pounds. Dedenne weighs 4.9 pounds. To compare these values, we
                    start by looking at the whole part. Both weights have a whole part of 4, so we must compare the
                    fractional parts. Pidove's weight has a 6 in its fractional part, and Dedenne's weight has a 9 in
                    its fractional part. Since 9 is greater than 6 (9 &gt; 6), Dedenne's weight is greater. So, we say
                    that
                    4.9 &gt; 4.6.</p>

                <p>
                    Sometimes we must look at the hundredths place, which is the second number after the decimal.
                </p>

                <p><u>Example 2</u>: You caught a Pikachu that weighs 6.36 kilograms, and your friend caught one that
                    weighs 6.35 kilograms. To compare their weights, we start by looking at the whole part of each.
                    Since they are both 6, we move to the fractional part. Because there are two decimal places, we
                    start by looking at the first one (the tenths position). These are both 3, so now we have to move on
                    to the final decimal place (the hundredths position). We are comparing 6 and 5, and 6 is greater
                    than 5 (6 &gt; 5). So, we say that 6.36 &gt; 6.35.</p>
            </section>

            <section>
                <h2>Less Than:</h2>
                <p>The less than symbol (<b>&lt;</b>) is used to show that the number to the left has a lesser value
                    than the number on the right. We follow a similar process as we did above.</p>

                <p><u>Example 1</u>: Rowlet weighs 3.3 pounds. Manaphy weighs 3.1 pounds. Since the whole parts are the
                    same, we look at the fractional part. Rowlet's weight has a 3, and Manaphy's weight has a 1. Since 1
                    is less than 3 (1 &lt; 3), we say that 3.1 &lt; 3.3.</p>

                <p><u>Example 2</u>: You caught an Eevee that is 0.24 meters tall, and your friend caught one that is
                    0.27 meters tall. To compare their heights, we start by looking at the whole part of each.
                    Since they are both 0, we move to the fractional part. Because there are two decimal places, we
                    start by looking at the first one (the tenths position). These are both 2, so now we have to move on
                    to the final decimal place (the hundredths position). We are comparing 4 and 7, and 4 is less
                    than 7 (4 &lt; 7). So, we say that 0.24 &lt; 0.27.</p>
            </section>

            <section>
                <h2>Equals:</h2>
                <p>
                    The equals symbol (<b>=</b>) is used to show that two numbers are equal in value.
                    When the whole part and fractional part of two decimals are the same, then the decimals are equal.
                </p>
                <p><u>Example</u>: Nidoqueen is 1.3 meters tall. Mr. Mime is 1.3 meters tall. Since both the whole and
                    fractional parts of the two heights are the same, the values are equal. We say that 1.3 = 1.3.</p>
            </section>

            <section>
                <h2>You Try:</h2>
                <p>
                    Look at the weights of Fletchling and Rowlet. Compare the two values using <b>&gt;</b>, <b>=</b>, or
                    <b>&lt;</b>. <b>Click on a card to view it in a larger size</b>.
                </p>
                <p>
                    <u>Check your answer using the "Check Answer" button. Once you have the correct answer, submit the
                        practice using the "Submit Practice" button.</u>
                </p>

                <div class="imgcontainer">
                    <div class="image-container">
                        <div class="image"><img src="{% static 'images/Fletchling.png' %}" alt=""></div>
                        <div class="image"><img src="{% static 'images/Rowlet.png' %}" alt=""></div>
                    </div>

                    <div class="popup-image">
                        <span>&times;</span>
                        <img src="" alt="" />
                    </div>
                </div>
                <br>
                <!-- practice submission and feedback -->
                <form id="practice-form" onsubmit="checkAnswer(event)"
                    action="{% url 'learning:submit_practice' practice.slug %}" method="post">
                    {% csrf_token %}
                    <label for="comparisonSymbol"><b>Fletching's weight</b></label>
                    <input type="text" id="comparisonSymbol" name="comparisonSymbol" style="width: 40px;" required>
                    <b>Rowlet's weight</b>
                    <input type="submit" value="Check Answer" id="submitBtn">
                </form>
                <p id="feedback"></p>
                <form id="final-form" method="post" action="{% url 'learning:submit_practice' practice.slug %}"
                    style="display: none;">
                    {% csrf_token %}
                    <input type="hidden" name="correct" value="True">
                    <button type="submit">Submit Practice</button>
                </form>
            </section>
        </main>
    </div>
    <div class="details">
        <h1>Number Sense Content</h1>
        <ul>
            <li><a href="{% url 'learning:practice_detail' practice_slug='comparing-whole-numbers' %}">Comparing
                    Whole
                    Numbers</a></li>
            <li><a href="{% url 'learning:practice_detail' practice_slug='comparing-decimals' %}">Comparing
                    Decimals</a>
            </li>
            <li><a href="{% url 'learning:quiz_detail' quiz_slug='number-sense-quiz' %}">Number Sense Quiz</a></li>
        </ul>
        <p class="back"><a href="{% url 'learning:gr4' %}">Go back to the Grade 4 page</a></p>
    </div>

    <script>
        // function to check the answer of the practice problem
        function checkAnswer(event) {
            event.preventDefault(); // prevent default form submission

            var comparisonSymbol = document.getElementById('comparisonSymbol').value.trim();
            var correctAnswer = '>';
            var feedback = document.getElementById('feedback');
            var inputField = document.getElementById('comparisonSymbol');
            var submitButton = document.getElementById('submitBtn');
            var finalForm = document.getElementById('final-form'); // form to submit once the answer is correct

            var allowedSymbols = ['>', '=', '<'];

            // validate input
            if (allowedSymbols.indexOf(comparisonSymbol) === -1) {
                feedback.textContent = 'Invalid input. Please enter >, =, or <.';
                return;
            }

            // check for correct answer and provide feedback
            if (comparisonSymbol === correctAnswer) {
                feedback.textContent = 'Correct! 3.7 is greater than 3.3 (since 7 is greater than 3), so ">" is the correct symbol. Well done!';
                inputField.disabled = true; // disable input field
                submitButton.disabled = true; // disable submit button
                finalForm.style.display = 'block'; // show the final submission form
            } else {
                feedback.textContent = 'Incorrect. Please try again.';
            }
        }

        // Function to handle popup image display
        document.querySelectorAll(".image img").forEach(image => {
            image.onclick = () => {
                document.querySelector(".popup-image").style.display = "block";
                document.querySelector(".popup-image img").src = image.getAttribute("src");
            };
        });

        // Close the popup when clicking outside the image
        document.querySelector(".popup-image").onclick = (event) => {
            if (event.target.classList.contains('popup-image')) {
                document.querySelector(".popup-image").style.display = "none";
            }
        };
    </script>
</div><br>
{% endblock %}