{% extends 'learning/base.html' %}
{% load static %}

{% block title_block %}
Real-World Problems with Whole Numbers
{% endblock %}

{% block body_block %}
<style>
    .container {
        max-width: 100%;
        padding: 10px;
        margin-left: 0;
    }

    .container .image-container {
        display: flex;
        gap: 15px;
        justify-content: flex-start;
        align-items: flex-start;
    }

    .container .image-container .image {
        height: 345px;
        width: 247.5px;
        border: 10px solid #fff;
        box-shadow: 0 5px 15px rgba(0, 0, 0, .1);
        overflow: hidden;
        cursor: pointer;
    }

    .container .image-container .image img {
        height: 100%;
        width: 100%;
        object-fit: cover;
        transition: .2s linear;
    }

    .container .image-container .image:hover {
        transform: scale(1.1)
    }

    .container .popup-image {
        position: fixed;
        top: 0;
        left: 0;
        background: rgba(0, 0, 0, .9);
        height: 100%;
        width: 100%;
        z-index: 100;
        display: none;
    }

    .container .popup-image span {
        position: absolute;
        top: 0;
        right: 10px;
        font-size: 10px;
        font-weight: bolder;
        color: #fff;
        cursor: pointer;
        z-index: 100;
    }

    .container .popup-image img {
        position: absolute;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        border: 5px solid #fff;
        border-radius: 5px;
        width: 750px;
        object-fit: cover;
    }

    @media (max-width:768px) {
        .container .popup-image img {
            width: 95%;
        }
    }
</style>
<header>
    <h1>Real-World Problems with Whole Numbers</h1>
</header>

<main>
    <section>
        <h2>Introduction:</h2>
        <p> Content here
        </p>
    </section>

    <section>
        <h2>Example 1:</h2>
        <p>Content here

        </p>
    </section>

    <section>
        <h2>Example 2:</h2>
        <p>Content here</p>

    </section>

    <section>
        <h2>You Try:</h2>
        <p> Your opponent attacks your Iron Leaves ex with Raging Bolt ex's Bellowing Thunder, discarding 3 Basic
            Energy. Your opponent claims this is enough damage to knock out your Iron Leaves, but you disagree. How
            many hit points does your Iron Leaves have left after the attack?</p>

        <div class="container">
            <div class="image-container">
                <div class="image"><img src="{% static 'images/IronLeaves.png' %}" alt=""></div>
                <div class="image"><img src="{% static 'images/RagingBolt.png' %}" alt=""></div>
            </div>

            <div class="popup-image">
                <span>&times;</span>
                <img src="" alt="" />
            </div>
        </div>

        <!-- answer input and submission -->
        <form onsubmit="checkAnswer(event)">
            <label for="inputField">Iron Leaves' remaining HP</label>
            <!-- limit input to whole numbers and make it required -->
            <input type="number" min="0" id="remainingHP" name="remainingHP" style="width: 40px;" required>
            <input type="submit" value="Submit" id="submitBtn">
        </form>
        <p id="feedback"></p>
    </section>
</main>
<script>
    function checkAnswer(event) {
        event.preventDefault(); // prevent default form submission

        var remainingHP = document.getElementById('remainingHP').value.trim();
        var correctAnswer = 10;
        var feedback = document.getElementById('feedback');
        var inputField = document.getElementById('remainingHP');
        var submitButton = document.getElementById('submitBtn');

        // validate input
        if (!remainingHP.checkValidity()) {
            feedback.textContent = 'Invalid input. Please enter a whole number';
            return;
        }

        // check for correct answer and provide feedback
        if (parseInt(remainingHP) === correctAnswer) {
            feedback.textContent = 'Correct! 70 * 3 = 210 and 220 - 210 = 10. Well done!';
            inputField.disabled = true; // disable input field
            submitButton.disabled = true; // disable submit button
        } else {
            feedback.textContent = 'Incorrect. Please try again.';
        }
    }

    // Function to handle popup display
    document.querySelectorAll(".image img").forEach(image => {
        image.onclick = () => {
            document.querySelector(".popup-image").style.display = "block";
            document.querySelector(".popup-image img").src = image.getAttribute("src");
        };
    });

    // Close popup when clicking outside the image
    document.querySelector(".popup-image").onclick = (event) => {
        if (event.target.classList.contains('popup-image')) {
            document.querySelector(".popup-image").style.display = "none";
        }
    };
</script>
{% endblock %}