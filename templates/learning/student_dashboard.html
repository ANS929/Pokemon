{% extends 'learning/base.html' %}
{% load static %}
{% block title_block %}
Student Dashboard
{% endblock %}

{% block body_block %}
<style>
    table {
        font-family: arial, sans-serif;
        border-collapse: collapse;
        width: 90%;
    }

    td,
    th {
        border: 1px solid #dddddd;
        text-align: left;
        padding: 8px;
    }

    tr:nth-child(even) {
        background-color: #dddddd;
    }

    .assignment-container {
        flex: 2;
    }

    .badge-container {
        flex: 1;
        border: 5px solid black;
        padding: 25px;
        margin: 20px;
        height: 500px;
    }

    .student-dashboard-container {
        display: flex;
    }

    @media (max-width: 400px) {
        .student-dashboard-container {
            flex-direction: column;
        }
    }

    .badge-icon {
        width: 50px;
        height: 50px;
        margin-right: 10px;
        opacity: 0.3;
    }

    .badge-icon.unlocked {
        opacity: 1;
    }

    .badge-icon.locked {
        opacity: 0.3;
    }
</style>

{% if messages %}
{% for message in messages %}
<div class="alert alert-{{ message.tags }}">{{ message }}</div>
{% endfor %}
{% endif %}

<header>
    <h1>Student Dashboard - {{ student.first_name }} {{ student.last_name }}</h1>
</header>
<p>Welcome to the Student Dashboard!</p>

<div class="student-dashboard-container">

    <div class="assignment-container">
        <h2>Completed Practices:</h2>
        <table>
            <tr>
                <th>Practice Name</th>
                <th>Grade Level</th>
                <th>Date of Completion</th>
            </tr>
            {% if completed_practices %}
            {% for practice in completed_practices %}
            <tr>
                <td>{{ practice.practice.title }}</td>
                <td>{{ practice.practice.grade_level }}</td>
                <td>{{ practice.date_completed }}</td>
            </tr>
            {% endfor %}
            {% else %}
            <p>No completed practices yet...</p>
            {% endif %}
        </table> <br>

        <h2>Completed Quizzes:</h2>
        <table>
            <tr>
                <th>Quiz Name</th>
                <th>Grade Level</th>
                <th>Date of Completion</th>
                <th>Quiz Score</th>
            </tr>
            {% if completed_quizzes %}
            {% for quiz in completed_quizzes %}
            <tr>
                <td>{{ quiz.quiz.title }}</td>
                <td>{{ quiz.quiz.grade_level }}</td>
                <td>{{ quiz.date_completed }}</td>
                <td>{{ quiz.score }} / 5</td>
            </tr>
            {% endfor %}
            {% else %}
            <p>No completed quizzes yet...</p>
            {% endif %}
        </table> <br>
    </div>

    <div class="badge-container">
        <h2>Badges:</h2>
        <ul>
            {% for item in badges_with_status %}
            <li>
                <img src="{% static 'images/'|add:item.badge.icon %}" alt="{{ item.badge.name }}"
                    class="badge-icon {% if item.completed %}unlocked{% else %}locked{% endif %}">
                {{ item.badge.name }}
                {% if item.completed %}
                    - completed on {{ item.date_completed }}
                {% else %}
                    - Locked
                {% endif %}
            </li>
            {% endfor %}
        </ul>
    </div>
</div>
{% endblock %}